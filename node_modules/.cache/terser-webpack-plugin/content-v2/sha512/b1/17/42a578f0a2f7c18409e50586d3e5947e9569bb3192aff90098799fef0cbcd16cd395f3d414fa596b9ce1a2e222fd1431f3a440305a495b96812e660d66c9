{"map":"{\"version\":3,\"sources\":[\"webpack/bootstrap\",\"/Users/boss/git/playground/service-worker-bundle/src/script.js\",\"/Users/boss/git/playground/service-worker-bundle/src/webauthn/utils.js\",\"/Users/boss/git/playground/service-worker-bundle/src/webauthn/base64url-arraybuffer.js\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"utils\",\"document\",\"createElement\",\"textContent\",\"body\",\"appendChild\",\"formBody\",\"fetch\",\"method\",\"credentials\",\"headers\",\"Content-Type\",\"JSON\",\"stringify\",\"then\",\"response\",\"json\",\"console\",\"log\",\"status\",\"Error\",\"message\",\"catch\",\"error\",\"getMakeCredentialsChallenge\",\"username\",\"async\",\"publicKey\",\"preformatMakeCredReq\",\"authenticatorSelection\",\"authenticatorAttachment\",\"userVerification\",\"rp\",\"id\",\"attestation\",\"navigator\",\"chars\",\"lookup\",\"Uint8Array\",\"length\",\"charCodeAt\",\"decode\",\"base64string\",\"encoded1\",\"encoded2\",\"encoded3\",\"encoded4\",\"bufferLength\",\"len\",\"bytes\",\"buffer\",\"publicKeyCredentialToJSON\",\"pubKeyCred\",\"Array\",\"arr\",\"push\",\"ArrayBuffer\",\"arraybuffer\",\"base64url\",\"substring\",\"encode\",\"obj\",\"generateRandomBuffer\",\"randomBuffer\",\"window\",\"crypto\",\"getRandomValues\",\"makeCredReq\",\"challenge\",\"user\",\"preformatGetAssertReq\",\"getAssert\",\"allowCred\",\"allowCredentials\",\"__WEBPACK_AMD_DEFINE_RESULT__\",\"methods\",\"undefined\",\"apply\"],\"mappings\":\"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\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n \\t\\t}\\n \\t};\\n\\n \\t// define __esModule on exports\\n \\t__webpack_require__.r = function(exports) {\\n \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n \\t\\t}\\n \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n \\t};\\n\\n \\t// create a fake namespace object\\n \\t// mode & 1: value is a module id, require it\\n \\t// mode & 2: merge all properties of value into the ns\\n \\t// mode & 4: return value when already ns object\\n \\t// mode & 8|1: behave like require\\n \\t__webpack_require__.t = function(value, mode) {\\n \\t\\tif(mode & 1) value = __webpack_require__(value);\\n \\t\\tif(mode & 8) return value;\\n \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n \\t\\tvar ns = Object.create(null);\\n \\t\\t__webpack_require__.r(ns);\\n \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n \\t\\treturn ns;\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"\\\";\\n\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = 83);\\n\",\"\\nconst utils = require('./webauthn/utils')\\n\\nlet getMakeCredentialsChallenge = (formBody) => {\\n  return fetch('/webauthn/register', {\\n    method: 'POST',\\n    credentials: 'include',\\n    headers: {\\n      'Content-Type': 'application/json'\\n    },\\n    body: JSON.stringify(formBody)\\n  })\\n.then((response) => response.json())\\n.then((response) => {\\n  console.log('Server response ' + JSON.stringify(response))\\n\\n  if (response.status !== 'ok') { throw new Error(`Server responed with error. The message is: ${response.message}`) }\\n\\n  return response.body\\n}).catch(error => {\\n  console.error(error)\\n})\\n}\\n\\nvar p = document.createElement('p')\\np.textContent = 'This content was added via JavaScript!'\\ndocument.body.appendChild(p)\\n\\nlet username = 'joaousername'\\nlet name = 'joao'\\n\\nif (!username || !name) {\\n  alert('Name or username is missing!')\\n}\\n\\ngetMakeCredentialsChallenge({username, name}).then(\\n     async (response) => {\\n       console.log('SW response: ' + JSON.stringify(response))\\n\\n       let publicKey = utils.preformatMakeCredReq(response)\\n       console.log('PUBLIC LEY: ' + JSON.stringify(publicKey))\\n       publicKey.authenticatorSelection = {\\n         'authenticatorAttachment': 'platform',\\n         'userVerification': 'preferred'\\n       }\\n       publicKey.rp.id = 'localhost'\\n       publicKey.rp.name = 'localhost'\\n       publicKey.attestation = 'direct'\\n       try {\\n         let cred = await navigator.credentials.create({publicKey})\\n         return cred\\n       } catch (error) {\\n         console.error(error.message)\\n         return error\\n       }\\n     }).catch(error => {\\n       console.error(error)\\n     })\\n\",\"/**\\n * Converts PublicKeyCredential into serialised JSON\\n * @param  {Object} pubKeyCred\\n * @return {Object}            - JSON encoded publicKeyCredential\\n */\\n\\nconst base64 = require('./base64url-arraybuffer')\\n\\nlet chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'\\n\\n    // Use a lookup table to find the index.\\nlet lookup = new Uint8Array(256)\\nfor (let i = 0; i < chars.length; i++) {\\n  lookup[chars.charCodeAt(i)] = i\\n}\\n\\nlet encode = function (arraybuffer) {\\n  let bytes = new Uint8Array(arraybuffer),\\n    i, len = bytes.length, base64url = ''\\n\\n  for (i = 0; i < len; i += 3) {\\n    base64url += chars[bytes[i] >> 2]\\n    base64url += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)]\\n    base64url += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)]\\n    base64url += chars[bytes[i + 2] & 63]\\n  }\\n\\n  if ((len % 3) === 2) {\\n    base64url = base64url.substring(0, base64url.length - 1)\\n  } else if (len % 3 === 1) {\\n    base64url = base64url.substring(0, base64url.length - 2)\\n  }\\n\\n  return base64url\\n}\\n\\nlet decode = function (base64string) {\\n  let bufferLength = base64string.length * 0.75,\\n    len = base64string.length, i, p = 0,\\n    encoded1, encoded2, encoded3, encoded4\\n\\n  let bytes = new Uint8Array(bufferLength)\\n\\n  for (i = 0; i < len; i += 4) {\\n    encoded1 = lookup[base64string.charCodeAt(i)]\\n    encoded2 = lookup[base64string.charCodeAt(i + 1)]\\n    encoded3 = lookup[base64string.charCodeAt(i + 2)]\\n    encoded4 = lookup[base64string.charCodeAt(i + 3)]\\n\\n    bytes[p++] = (encoded1 << 2) | (encoded2 >> 4)\\n    bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2)\\n    bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63)\\n  }\\n\\n  return bytes.buffer\\n}\\n\\nconst publicKeyCredentialToJSON = (pubKeyCred) => {\\n  if (pubKeyCred instanceof Array) {\\n    let arr = []\\n    for (let i of pubKeyCred) { arr.push(publicKeyCredentialToJSON(i)) }\\n\\n    return arr\\n  }\\n\\n  if (pubKeyCred instanceof ArrayBuffer) {\\n    return encode(pubKeyCred)\\n  }\\n\\n  if (pubKeyCred instanceof Object) {\\n    let obj = {}\\n\\n    for (let key in pubKeyCred) {\\n      obj[key] = publicKeyCredentialToJSON(pubKeyCred[key])\\n    }\\n\\n    return obj\\n  }\\n\\n  return pubKeyCred\\n}\\n\\n/**\\n * Generate secure random buffer\\n * @param  {Number} len - Length of the buffer (default 32 bytes)\\n * @return {Uint8Array} - random string\\n */\\nconst generateRandomBuffer = (len) => {\\n  len = len || 32\\n\\n  let randomBuffer = new Uint8Array(len)\\n  window.crypto.getRandomValues(randomBuffer)\\n\\n  return randomBuffer\\n}\\n\\n/**\\n * Decodes arrayBuffer required fields.\\n */\\nconst preformatMakeCredReq = (makeCredReq) => {\\n  makeCredReq.challenge = new Uint8Array(decode(makeCredReq.challenge))\\n  makeCredReq.user.id = new Uint8Array(decode(makeCredReq.user.id))\\n\\n  console.log('RET: ')\\n  console.log(makeCredReq)\\n  return makeCredReq\\n}\\n\\n/**\\n * Decodes arrayBuffer required fields.\\n */\\nconst preformatGetAssertReq = (getAssert) => {\\n  getAssert.challenge = decode(getAssert.challenge)\\n\\n  for (let allowCred of getAssert.allowCredentials) {\\n    allowCred.id = decode(allowCred.id)\\n  }\\n\\n  return getAssert\\n}\\n\\nmodule.exports = {\\n  publicKeyCredentialToJSON,\\n  generateRandomBuffer,\\n  preformatMakeCredReq,\\n  preformatGetAssertReq\\n}\\n\",\"/*\\n * Base64URL-ArrayBuffer\\n * https://github.com/herrjemand/Base64URL-ArrayBuffer\\n *\\n * Copyright (c) 2017 Yuriy Ackermann <ackermann.yuriy@gmail.com>\\n * Copyright (c) 2012 Niklas von Hertzen\\n * Licensed under the MIT license.\\n *\\n */\\n(function () {\\n  'use strict'\\n\\n  let chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'\\n\\n    // Use a lookup table to find the index.\\n  let lookup = new Uint8Array(256)\\n  for (let i = 0; i < chars.length; i++) {\\n    lookup[chars.charCodeAt(i)] = i\\n  }\\n\\n  let encode = function (arraybuffer) {\\n    let bytes = new Uint8Array(arraybuffer),\\n      i, len = bytes.length, base64url = ''\\n\\n    for (i = 0; i < len; i += 3) {\\n      base64url += chars[bytes[i] >> 2]\\n      base64url += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)]\\n      base64url += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)]\\n      base64url += chars[bytes[i + 2] & 63]\\n    }\\n\\n    if ((len % 3) === 2) {\\n      base64url = base64url.substring(0, base64url.length - 1)\\n    } else if (len % 3 === 1) {\\n      base64url = base64url.substring(0, base64url.length - 2)\\n    }\\n\\n    return base64url\\n  }\\n\\n  let decode = function (base64string) {\\n    let bufferLength = base64string.length * 0.75,\\n      len = base64string.length, i, p = 0,\\n      encoded1, encoded2, encoded3, encoded4\\n\\n    let bytes = new Uint8Array(bufferLength)\\n\\n    for (i = 0; i < len; i += 4) {\\n      encoded1 = lookup[base64string.charCodeAt(i)]\\n      encoded2 = lookup[base64string.charCodeAt(i + 1)]\\n      encoded3 = lookup[base64string.charCodeAt(i + 2)]\\n      encoded4 = lookup[base64string.charCodeAt(i + 3)]\\n\\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4)\\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2)\\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63)\\n    }\\n\\n    return bytes.buffer\\n  }\\n\\n  let methods = {\\n    'decode': decode,\\n    'encode': encode\\n  }\\n  window.base64url = methods\\n\\n    /**\\n     * Exporting and stuff\\n     */\\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\\n    module.exports = methods\\n  } else {\\n    if (typeof define === 'function' && define.amd) {\\n      define([], function () {\\n        return methods\\n      })\\n    } else {\\n      window.base64url = methods\\n    }\\n  }\\n})()\\n\"]}","code":"!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=83)}({83:function(e,t,r){const n=r(84);var o=document.createElement(\"p\");o.textContent=\"This content was added via JavaScript!\",document.body.appendChild(o);(e=>fetch(\"/webauthn/register\",{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{if(console.log(\"Server response \"+JSON.stringify(e)),\"ok\"!==e.status)throw new Error(`Server responed with error. The message is: ${e.message}`);return e.body}).catch(e=>{console.error(e)}))({username:\"joaousername\",name:\"joao\"}).then(async e=>{console.log(\"SW response: \"+JSON.stringify(e));let t=n.preformatMakeCredReq(e);console.log(\"PUBLIC LEY: \"+JSON.stringify(t)),t.authenticatorSelection={authenticatorAttachment:\"platform\",userVerification:\"preferred\"},t.rp.id=\"localhost\",t.rp.name=\"localhost\",t.attestation=\"direct\";try{return await navigator.credentials.create({publicKey:t})}catch(e){return console.error(e.message),e}}).catch(e=>{console.error(e)})},84:function(e,t,r){r(85);let n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\",o=new Uint8Array(256);for(let e=0;e<n.length;e++)o[n.charCodeAt(e)]=e;let a=function(e){let t,r,n,a,i,l=.75*e.length,c=e.length,u=0,s=new Uint8Array(l);for(t=0;t<c;t+=4)r=o[e.charCodeAt(t)],n=o[e.charCodeAt(t+1)],a=o[e.charCodeAt(t+2)],i=o[e.charCodeAt(t+3)],s[u++]=r<<2|n>>4,s[u++]=(15&n)<<4|a>>2,s[u++]=(3&a)<<6|63&i;return s.buffer};const i=e=>{if(e instanceof Array){let t=[];for(let r of e)t.push(i(r));return t}if(e instanceof ArrayBuffer)return function(e){let t,r=new Uint8Array(e),o=r.length,a=\"\";for(t=0;t<o;t+=3)a+=n[r[t]>>2],a+=n[(3&r[t])<<4|r[t+1]>>4],a+=n[(15&r[t+1])<<2|r[t+2]>>6],a+=n[63&r[t+2]];return o%3==2?a=a.substring(0,a.length-1):o%3==1&&(a=a.substring(0,a.length-2)),a}(e);if(e instanceof Object){let t={};for(let r in e)t[r]=i(e[r]);return t}return e};e.exports={publicKeyCredentialToJSON:i,generateRandomBuffer:e=>{e=e||32;let t=new Uint8Array(e);return window.crypto.getRandomValues(t),t},preformatMakeCredReq:e=>(e.challenge=new Uint8Array(a(e.challenge)),e.user.id=new Uint8Array(a(e.user.id)),console.log(\"RET: \"),console.log(e),e),preformatGetAssertReq:e=>{e.challenge=a(e.challenge);for(let t of e.allowCredentials)t.id=a(t.id);return e}}},85:function(e,t,r){var n;!function(){\"use strict\";let r=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\",o=new Uint8Array(256);for(let e=0;e<r.length;e++)o[r.charCodeAt(e)]=e;let a={decode:function(e){let t,r,n,a,i,l=.75*e.length,c=e.length,u=0,s=new Uint8Array(l);for(t=0;t<c;t+=4)r=o[e.charCodeAt(t)],n=o[e.charCodeAt(t+1)],a=o[e.charCodeAt(t+2)],i=o[e.charCodeAt(t+3)],s[u++]=r<<2|n>>4,s[u++]=(15&n)<<4|a>>2,s[u++]=(3&a)<<6|63&i;return s.buffer},encode:function(e){let t,n=new Uint8Array(e),o=n.length,a=\"\";for(t=0;t<o;t+=3)a+=r[n[t]>>2],a+=r[(3&n[t])<<4|n[t+1]>>4],a+=r[(15&n[t+1])<<2|n[t+2]>>6],a+=r[63&n[t+2]];return o%3==2?a=a.substring(0,a.length-1):o%3==1&&(a=a.substring(0,a.length-2)),a}};window.base64url=a,void 0!==e.exports?e.exports=a:void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}});","extractedComments":[]}