{"code":"!function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var o in e)n.d(t,o,function(r){return e[r]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,\"a\",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p=\"\",n(n.s=83)}({83:function(e,r,n){const t=n(84);var o=document.createElement(\"p\");o.textContent=\"This content was added via JavaScript!\",document.body.appendChild(o);(e=>fetch(\"/webauthn/register\",{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{if(console.log(\"Server response \"+JSON.stringify(e)),\"ok\"!==e.status)throw new Error(`Server responed with error. The message is: ${e.message}`);return e.body}).catch(e=>{console.error(e)}))({username:\"joaousername\",name:\"joao\"}).then(e=>{console.log(\"SW response: \"+JSON.stringify(e));let r=t.preformatMakeCredReq(e);return r.authenticatorSelection={authenticatorAttachment:\"platform\",userVerification:\"preferred\"},r.rp.id=\"localhost\",console.log(\"PUB KEY: \"+JSON.stringify(r)),navigator.credentials.create({publicKey:r})}).catch(e=>{console.error(e)})},84:function(e,r,n){n(85);const t=e=>{if(e instanceof Array){let r=[];for(let n of e)r.push(t(n));return r}if(e instanceof ArrayBuffer)return window.base64url.encode(e);if(e instanceof Object){let r={};for(let n in e)r[n]=t(e[n]);return r}return e},o=async()=>{for(;;)if(Object.keys(window.base64url).includes(\"encode\"))return!0};e.exports={publicKeyCredentialToJSON:t,generateRandomBuffer:e=>{e=e||32;let r=new Uint8Array(e);return window.crypto.getRandomValues(r),r},preformatMakeCredReq:async e=>{console.log(\"Received1: \"+e),console.log(\"Received2: \"+JSON.stringify(e.challenge)),console.log(\"Funtion: \"+JSON.stringify(Object.keys(window.base64url))),await o(),console.log(\"Funtion: \"+JSON.stringify(Object.keys(window.base64url)));const r=window.base64url.decode(e.challenge);e.challenge=window.base64url.decode(e.challenge);const n=window.base64url.decode(e.user.id);return e.user.id=window.base64url.decode(e.user.id),console.log(\"RET1: \"+JSON.stringify(r)),console.log(\"RET2: \"+JSON.stringify(n)),e},preformatGetAssertReq:e=>{e.challenge=window.base64url.decode(e.challenge);for(let r of e.allowCredentials)r.id=window.base64url.decode(r.id);return e}}},85:function(e,r,n){var t;!function(){\"use strict\";let n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\",o=new Uint8Array(256);for(let e=0;e<n.length;e++)o[n.charCodeAt(e)]=e;let i={decode:function(e){let r,n,t,i,l,a=.75*e.length,c=e.length,s=0,u=new Uint8Array(a);for(r=0;r<c;r+=4)n=o[e.charCodeAt(r)],t=o[e.charCodeAt(r+1)],i=o[e.charCodeAt(r+2)],l=o[e.charCodeAt(r+3)],u[s++]=n<<2|t>>4,u[s++]=(15&t)<<4|i>>2,u[s++]=(3&i)<<6|63&l;return u.buffer},encode:function(e){let r,t=new Uint8Array(e),o=t.length,i=\"\";for(r=0;r<o;r+=3)i+=n[t[r]>>2],i+=n[(3&t[r])<<4|t[r+1]>>4],i+=n[(15&t[r+1])<<2|t[r+2]>>6],i+=n[63&t[r+2]];return o%3==2?i=i.substring(0,i.length-1):o%3==1&&(i=i.substring(0,i.length-2)),i}};window.base64url=i,void 0!==e.exports?e.exports=i:void 0===(t=function(){return i}.apply(r,[]))||(e.exports=t)}()}});","extractedComments":[]}